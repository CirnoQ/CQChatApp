# Day3

在前两天我们完成了前端与后端框架的基本架构，今天我们的主要目标是实现前后端的数据传输，实现方式为通过前端的注册/登录界面注册一个新用户验证后台是否写入数据，然后输入错误的密码验证后台是否能向前端传输数据。


## 在后端添加登录/注册功能

- ### 完善UserMapper接口
我们由Mybatis自动生成的UserMapper接口只能通过id查找用户对象，我们可以手动添加一个通过用户名(username)查找指定用户对象的功能。

- ### 在UserController添加登录/注册功能
向UserController类中添加登录/注册方法，其工作流程为：

1. 由前端获取用户信息(传递User类)，注意在前端已经进行了输入信息合法性检测。
2. 判断用户名是否存在，若存在进行登录信息验证；若不存在，由获取的用户信息进行注册。
3. 进行相关验证之后向前端返回状态码。

- ### 创建工具包存放相关方法
在项目中我们会需要用到类似于MD5码加密等方法，我们可以设置一个名为utils的pack，在里面存放工具类。

- ### 敏感数据处理
在后端向前端返回数据时可能会有如密码、地址之类的敏感数据，这时我们可以创建一个VO包，里面存放的是经过处理的实体类，在返回时我们可以返回这些去掉了敏感信息的类。

## 前端与后端进行信息交换
前端的登录/注册界面在第一天已经做好，我们只需在该页面的script中写好异步请求服务端指令即可进行前后端信息交换。

- ### 配置后端服务url
在前端异步请求函数中需要给出后端服务url。

在后端通过Tomcat可以生成项目后端入口，格式为`(localhost)+(端口号)`。

在目前项目没有上线的情况下我们可以通过连接同一局域网的方式使移动端和服务端处于同一ip，此时url为`前端url+(Tomcat端口号)`

- ### 前端处理回调结果
前端向后端传输信息后，后端会向前端返回状态码。之后前端需要根据状态码向用户进行反馈，比如验证失败需要弹出错误信息，成功需要进行跳转。(具体代码详见工程文件)

## 优化登录/注册界面
因为登录注册已经一体化了，所以我们可以将欢迎页面设定为登录/注册界面，而不必单独设定一个欢迎页面。另外我们可以在登录/注册界面中间设置一个头像位，优化一下布局。
